# NeuroCrew Lab — пользовательские истории MVP

| # | История | Критерии приёмки |
|---|---------|------------------|
| US-01 | Как **участник Telegram-группы**, я хочу отправить сообщение боту-слушателю, чтобы вся команда виртуальных агентов обсудила задачу в чате. | 1) Сообщения из `TARGET_CHAT_ID` принимаются, остальные игнорируются; 2) запись сохраняется в `data/conversations/*`; 3) минимум один ответ от роли возвращается в тот же чат. |
| US-02 | Как **оператор Puppet Master**, я хочу настраивать актёров через `.env` и `roles/agents.yaml`, чтобы в ротацию попадали только роли с валидными CLI/SDK и токенами. | 1) Отсутствие токена/команды отключает роль с предупреждением; 2) `/agents` показывает итоговую последовательность; 3) некорректная конфигурация блокирует запуск с понятной ошибкой. |
| US-03 | Как **бот-роль «разработчик»**, я хочу переиспользовать CLI-сессию между ходами, чтобы не терять контекст многошаговых задач. | 1) Процесс коннектора живёт для пары чат+роль до `/reset` или остановки; 2) при временных сбоях выполняются автоматические ретраи; 3) при выключении сессия завершается корректно. |
| US-04 | Как **API-провайдер (SDK-агент)**, я хочу, чтобы ключи считывались напрямую из окружения пользователя, чтобы не хранить секреты в проекте. | 1) `OPENAI_API_KEY`/`ANTHROPIC_API_KEY` подхватываются из окружения; 2) SDK-коннекторы не требуют записей в `.env`; 3) при отсутствии ключей выдаётся понятная ошибка. |
| US-05 | Как **модератор группы**, я хочу сбросить диалог, если обсуждение ушло в сторону, чтобы агенты начали с чистого листа. | 1) `/reset` удаляет историю чата; 2) все коннекторы этого чата останавливаются; 3) пользователю возвращается подтверждение. |
| US-06 | Как **оператор**, я хочу быстро проверять состояние через команды, а не через отдельные панели. | 1) `/status` показывает доступность каждой роли; 2) `/metrics` возвращает счётчики вызовов и времени; 3) `/next` немедленно переключает очередь на следующего агента. |
| US-07 | Как **администратор**, я хочу редактировать роли через Web UI, чтобы не править YAML вручную. | 1) `web_server.py` требует Basic Auth; 2) форма сохраняет `roles/agents.yaml` и токены; 3) после сохранения создаётся флаг для перезагрузки (`.reload`). |
| US-08 | Как **ответственный за безопасность**, я хочу хранить секреты локально, чтобы учётные данные AI не утекли через платформу. | 1) `.env` не попадает в git; 2) логи проходят через `sanitize_for_logging`; 3) документация напоминает аутентифицировать CLI вне NeuroCrew. |
