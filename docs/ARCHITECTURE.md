# üìñ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ NeuroCrew Lab

## –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

NeuroCrew Lab —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω **Puppet Master**: –æ–¥–∏–Ω –±–æ—Ç-—Å–ª—É—à–∞—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–æ—Ç–∞–º–∏-–∞–∫—Ç—ë—Ä–∞–º–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–æ—è—Ç AI-–∞–≥–µ–Ω—Ç—ã (–≤—Å–µ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ CLI). –í—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–¥–Ω–æ–º Telegram-—á–∞—Ç–µ, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –º–∏–Ω–∏–º–∞–ª–µ–Ω: Python/asyncio, `python-telegram-bot`, subprocess-–∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –¥–ª—è CLI –∏ JSON-—Ñ–∞–π–ª—ã –≤ `data/`.

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram-–≥—Ä—É–ø–ø–∞ ‚Üí Listener Bot ‚Üí NeuroCrew Core ‚Üí –¶–µ–ø–æ—á–∫–∞ —Ä–æ–ª–µ–π
                                                   ‚Üì
                                 ACP: OpenCode/Qwen/Gemini, headless CLI: Codex/Claude
                                                   ‚Üì
                                  Actor Bots ‚Üí Telegram-–≥—Ä—É–ø–ø–∞
```

## –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### **main.py** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Telegram API
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `app.interfaces.telegram_bot.TelegramBot` –≤–Ω—É—Ç—Ä–∏ asyncio
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Flask web-—Å–µ—Ä–≤–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç graceful shutdown —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ SIGINT/SIGTERM

### **app/core/engine.py (NeuroCrewLab)** - –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
- –í–µ–¥—ë—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ —Ä–æ–ª–µ–π –Ω–∞ —á–∞—Ç, —Å–æ–∑–¥–∞—ë—Ç/–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã
- –†–µ–∞–ª–∏–∑—É–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ü–∏–∫–ª –¥–∏–∞–ª–æ–≥–∞ `_run_autonomous_cycle`
- –£–ø—Ä–∞–≤–ª—è–µ—Ç stateful —Å–µ—Å—Å–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏: `connector_sessions`, `chat_role_pointers`, `role_last_seen_index`
- –í—ã–¥–∞—ë—Ç –æ—Ç–≤–µ—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ `handle_message`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É —Ä–æ–ª–µ–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç retry-–ª–æ–≥–∏–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–∞–π–º–∞—É—Ç–æ–≤

### **app/interfaces/telegram_bot.py** - Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –†–µ–∞–ª–∏–∑—É–µ—Ç listener-–±–æ—Ç–∞: —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–∞—Ç—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã
- –°—Ç—Ä–∏–º–∏—Ç –æ—Ç–≤–µ—Ç—ã —Ä–æ–ª–µ–π –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–æ—Ç-–∞–∫—Ç—ë—Ä–æ–≤
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º NeuroCrewLab —á–µ—Ä–µ–∑ –ª–µ–Ω–∏–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã: `/start`, `/help`, `/reset`, `/status`, `/metrics`, `/agents`, `/next`, `/about`
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º MarkdownV2

### **app/interfaces/web_server.py** - Flask UI
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å Basic Auth (`WEB_ADMIN_USER` / `WEB_ADMIN_PASS`)
- CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Ä–æ–ª—è–º–∏ —á–µ—Ä–µ–∑ `roles/agents.yaml`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ `.env` —Ñ–∞–π–ª–µ
- –°–æ–∑–¥–∞—ë—Ç —Ñ–ª–∞–≥ `.reload` –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è YAML –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω –±–æ—Ç–æ–≤

### **app/connectors/** - AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### **base.py** - –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `BaseConnector` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤
- `BaseACPConnector` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è ACP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- `BaseCLIConnector` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è headless CLI
- –û–±—â–∏–µ –º–µ—Ç–æ–¥—ã: `launch()`, `execute()`, `shutdown()`, `health_check()`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ subprocess, –ø–æ—Ç–æ–∫–∞–º–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, —Ç–∞–π–º–∞—É—Ç–∞–º–∏

#### **ACP-–∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã** (Agent Communication Protocol)
- **opencode_acp_connector.py** - OpenCode CLI —á–µ—Ä–µ–∑ ACP
- **qwen_acp_connector.py** - Qwen CLI —á–µ—Ä–µ–∑ ACP  
- **gemini_acp_connector.py** - Gemini CLI —á–µ—Ä–µ–∑ ACP
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- –£–ø—Ä–∞–≤–ª—è—é—Ç handshake, keep-alive, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

#### **Headless CLI-–∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã**
- **codex_cli_connector.py** - Codex (`codex exec --json`)
- **claude_cli_connector.py** - Claude Code (`claude -p --output-format stream-json`)
- –ó–∞–ø—É—Å–∫–∞—é—Ç CLI –≤ –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ CLI-—Å–µ—Å—Å–∏–∏

### **app/storage/file_storage.py** - –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ `data/conversations/chat_{id}.json`
- –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: timestamp, role_name, message_type, metadata
- –ë—ç–∫–∞–ø–∏—Ç –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é
- –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã —á–µ—Ä–µ–∑ `cleanup_old_backups()`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã conversation

### **app/config.py** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `Config` class - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ environment variables
- `RoleConfig` dataclass - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ä–æ–ª–∏
- `RolesRegistry` - —Ä–µ–µ—Å—Ç—Ä –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–µ–π
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Ç–æ–∫–µ–Ω–æ–≤ `{TELEGRAM_BOT_NAME}_TOKEN` –≤ `.env`
- –í–∞–ª–∏–¥–∞—Ü–∏—è `roles/agents.yaml` –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

### **app/utils/** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- **logger.py** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π —Å–µ–∫—Ä–µ—Ç–æ–≤
- **formatters.py** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, MarkdownV2 escaping
- **security.py** - –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Data Flow)

### 1. **–í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
```
Telegram User ‚Üí Target Chat ‚Üí Listener Bot ‚Üí Security Validation ‚Üí Message Logging
```
- Listener-–±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `TARGET_CHAT_ID`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ –ª–æ–≥–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —á–µ—Ä–µ–∑ `app.utils.security`
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ `FileStorage.add_message()`

### 2. **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ–ª–µ–π**
```
NeuroCrewLab.handle_message() ‚Üí _run_autonomous_cycle() ‚Üí Role Sequence Processing
```
- `handle_message()` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ü–∏–∫–ª
- –¶–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—Å–µ –∞–≥–µ–Ω—Ç—ã –ø–æ–¥—Ä—è–¥ –Ω–µ –≤–µ—Ä–Ω—É—Ç `.....`
- –î–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_process_with_role()`

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–æ–ª–∏**
```
Role Selection ‚Üí Prompt Formation ‚Üí Connector Management ‚Üí AI Execution ‚Üí Response Storage
```
- –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç –∏–∑ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—á–∞—Å—Ç–∏—è —Ä–æ–ª–∏)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è/–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- –ß–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç, —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç, –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤—Ä–µ–º—è
- –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ `FileStorage.add_message()`

### 4. **–í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
```
Response Processing ‚Üí Actor Bot Selection ‚Üí Telegram Formatting ‚Üí Message Delivery
```
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ TelegramBot –∏—â–µ—Ç —Ç–æ–∫–µ–Ω –∞–∫—Ç—ë—Ä–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º MarkdownV2
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ actor-–±–æ—Ç–∞ (–∏–ª–∏ listener-–±–æ—Ç–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞)

### 5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞**
```
Cycle Completion ‚Üí Session Cleanup ‚Üí State Reset ‚Üí Ready for Next Message
```
- `/reset` –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–∑—ã–≤–∞—é—Ç `shutdown_role_sessions()`
- –ó–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤—Å–µ subprocess –¥–ª—è —á–∞—Ç–∞, –æ—á–∏—â–∞—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã
- –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (State Management)

### **Session Management**
- `connector_sessions[(chat_id, role_name)]` - –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã
- `chat_role_pointers[chat_id]` - —Ç–µ–∫—É—â–∞—è —Ä–æ–ª—å –≤ —Ü–∏–∫–ª–µ
- `role_last_seen_index[(chat_id, role_name)]` - –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–æ–ª–∏
- `role_response_count[(chat_id, role_name)]` - —Å—á–µ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤ —Ä–æ–ª–∏

### **Autonomous Cycle Logic**
```python
while not all_agents_returned_stop:
    for role in roles:
        response = await process_role(role, context)
        if response == ".....":
            mark_role_stopped(role)
        else:
            send_response_via_actor(response, role)
    
    if all_roles_stopped():
        break
```

### **Concurrency Model**
- **–û–¥–∏–Ω asyncio loop** –Ω–∞ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–æ–ª–µ–π** –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ subprocess** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ CLI-–∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ I/O** –¥–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ Telegram API

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è

### **Process Isolation**
- –ö–∞–∂–¥—ã–π AI-–∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º subprocess
- –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã —É–ø—Ä–∞–≤–ª—è—é—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### **Data Security**
- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ environment variables
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π —Å–µ–∫—Ä–µ—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ `app.utils.security`
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API-–∫–ª—é—á–µ–π –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ

### **Telegram Security**
- –†–∞–±–æ—Ç–∞ —Ç–æ–ª—å–∫–æ —Å `TARGET_CHAT_ID`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –±–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- Graceful fallback –Ω–∞ listener-–±–æ—Ç–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞ –∞–∫—Ç—ë—Ä–∞

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### **–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- **–û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å** - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Subprocess overhead** - –∑–∞–ø—É—Å–∫ CLI –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
- **Memory usage** - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å

### **–ü—É—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**
1. **Horizontal scaling** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å –æ–±—â–µ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
2. **Connector pooling** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI-—Å–µ—Å—Å–∏–π
3. **Database storage** - PostgreSQL/MongoDB –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–æ–≤
4. **Microservices** - –≤—ã–Ω–æ—Å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

## Runtime —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### **Performance**
- **Latency**: 2-10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–≤–µ—Ç —Ä–æ–ª–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç CLI)
- **Throughput**: 1 —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–µ–∫—É–Ω–¥—É –Ω–∞ —á–∞—Ç
- **Memory**: ~50MB –±–∞–∑–æ–≤—ã–π + ~10MB –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é
- **CPU**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, spikes –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ CLI

### **Reliability**
- **Retry logic**: –¥–æ 2 –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞ —Ä–æ–ª—å
- **Graceful degradation**: fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞
- **State recovery**: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤
- **Health checks**: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CLI

### **Monitoring**
- **Logging**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π —Å–µ–∫—Ä–µ—Ç–æ–≤
- **Metrics**: —Å—á–µ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–∞–π–º–∏–Ω–≥–∏, –æ—à–∏–±–∫–∏
- **Health endpoints**: `/metrics`, `/status` –∫–æ–º–∞–Ω–¥—ã
- **Debug mode**: `LOG_LEVEL=DEBUG` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏