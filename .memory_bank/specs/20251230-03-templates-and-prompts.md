# Спецификация: Templates and Stage Prompts

**Имя:** Templates and Stage Prompts  
**Дата:** 2025-12-30  
**Версия:** 1.0  
**Статус:** Done

## Обзор

Создать шаблоны для задач, спецификаций и планов, а также промпты для каждого этапа воркфлоу.

## User Stories

### US-2.1: Шаблоны для задач
Как **Разработчик**, я хочу иметь шаблоны для задач, спецификаций и планов, чтобы не писать их с нуля каждый раз.

### US-2.2: Промпты для этапов
Как **Разработчик**, я хочу иметь промпты для каждого этапа воркфлоу, чтобы агент знал, что делать на каждом этапе.

### US-2.3: Переменные в промптах
Как **Разработчик**, я хочу использовать переменные в промптах (например, {task_file}), чтобы легко подставлять значения.

## Требования

### Функциональные требования

#### 1. Шаблоны (templates/)

**Шаблон задачи (task.md):**
- YAML frontmatter с полями: title, stage, status, priority, agenticHarness, modelProvider, modelName
- Секции: Description, Requirements, Dependencies, Acceptance Criteria

**Шаблон спецификации (spec.md):**
- Заголовок с метаданными (Имя, Дата, Версия, Статус)
- Секции: Обзор, User Stories, Требования (функциональные и нефункциональные), Приемочные критерии

**Шаблон плана (plan.md):**
- Заголовок с метаданными и ссылкой на спецификацию
- Секции: Обзор, Предварительные требования, Этапы, Приемочные критерии

#### 2. Промпты этапов (stage_prompts/)

**specification.md:**
- Инструкция прочитать задачу из файла {task_file}
- Указание создать спецификацию по шаблону
- Требования к содержанию спецификации

**plan.md:**
- Инструкция прочитать спецификацию из файла {task_file}
- Указание создать план по шаблону
- Требования к содержанию плана

**implementation.md:**
- Инструкция прочитать план реализации из файла {task_file}
- Требования к реализации (конвенции, библиотеки, тесты, документация)

**verification.md:**
- Инструкция прочитать реализацию из файла {task_file}
- Проверки (функциональные тесты, unit тесты, integration тесты, линтинг, документация)
- Формат результата (PASS/FAIL с объяснением)

### Нефункциональные требования

1. **Расположение:** Шаблоны и промпты хранятся в `~/.ncrew/templates/` и `~/.ncrew/stage_prompts/`
2. **Формат:** MD файлы с YAML frontmatter для шаблонов
3. **Совместимость:** Промпты совместимы с `opencode run`
4. **Легкость редактирования:** Пользователь может редактировать шаблоны и промпты вручную

## Приемочные критерии

1. ✅ Шаблон задачи (task.md) создан в `~/.ncrew/templates/`
2. ✅ Шаблон спецификации (spec.md) создан в `~/.ncrew/templates/`
3. ✅ Шаблон плана (plan.md) создан в `~/.ncrew/templates/`
4. ✅ Промпт для specification.md создан в `~/.ncrew/stage_prompts/`
5. ✅ Промпт для plan.md создан в `~/.ncrew/stage_prompts/`
6. ✅ Промпт для implementation.md создан в `~/.ncrew/stage_prompts/`
7. ✅ Промпт для verification.md создан в `~/.ncrew/stage_prompts/`
8. ✅ Промпты содержат ссылки на соответствующие шаблоны
9. ✅ Промпты используют переменную {task_file}
10. ✅ Шаблоны следуют указанной структуре
