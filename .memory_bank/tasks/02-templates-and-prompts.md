---
title: Templates and Stage Prompts
stage: Specification
status: New
priority: High
agenticHarness: opencode
modelProvider: opencode
modelName: claude-sonnet-4-5
---

# Description

Создать шаблоны для задач, спецификаций и планов, а также промпты для каждого этапа воркфлоу.

## Requirements

### Шаблоны (templates/)

**task.md** - Шаблон задачи
```yaml
---
title: Task Title
stage: Specification
status: New
priority: Medium
agenticHarness: opencode
modelProvider: opencode
modelName: claude-sonnet-4-5
---

# Description

Task description...

## Requirements

1. Requirement 1
2. Requirement 2

## Dependencies

- Зависит от: -
- Блокирует: -

## Acceptance Criteria

- ✅ AC 1
- ✅ AC 2
```

**spec.md** - Шаблон спецификации
```markdown
# Спецификация: <название>

**Имя:** <имя>  
**Дата:** <дата>  
**Версия:** <версия>  
**Статус:** <статус>

## Обзор

Краткое описание фичи.

## User Stories

### US-X.1: Название
Как **<роль>**, я хочу <действие>, чтобы <цель>.

## Требования

### Функциональные требования
...

### Нефункциональные требования
...

## Приемочные критерии

1. ✅ Критерий 1
2. ✅ Критерий 2
```

**plan.md** - Шаблон плана
```markdown
# План реализации: <название>

**Основан на спецификации:** <путь к спецификации>  
**Дата:** <дата>  
**Версия:** <версия>

## Обзор

План описывает реализацию фичи.

## Предварительные требования

...

## Этапы

### Этап 1: <название>
...

## Приемочные критерии

...
```

### Промпты этапов (stage_prompts/)

**specification.md** - Промпт для этапа Specification
```markdown
Прочитай и выполни задачу из файла {task_file}.

На выходе должна быть спецификация по шаблону ~/.ncrew/templates/spec.md.

Спецификация должна содержать:
- User Stories (минимум 2-3 истории)
- Функциональные требования
- Нефункциональные требования
- Приемочные критерии (минимум 5 критериев)
```

**plan.md** - Промпт для этапа Plan
```markdown
Прочитай спецификацию из файла {task_file}.

Создай план реализации по шаблону ~/.ncrew/templates/plan.md.

План должен содержать:
- Предварительные требования
- Этапы (минимум 3 этапа)
- Детализированные задачи
- Приемочные критерии для каждого этапа
```

**implementation.md** - Промпт для этапа Implementation
```markdown
Прочитай план реализации из файла {task_file}.

Реализуй функционал согласно плану.

Требования к реализации:
- Код должен следовать конвенциям проекта
- Использовать существующие библиотеки
- Писать тесты
- Обновлять документацию
```

**verification.md** - Промпт для этапа Verification
```markdown
Прочитай реализацию из файла {task_file}.

Проверь, что все приемочные критерии спецификации выполнены.

Проверки:
1. Функциональные тесты
2. Unit тесты
3. Integration тесты
4. Линтинг и типизация
5. Документация

Результат проверки: PASS/FAIL с объяснением.
```

## Требования

1. Создать структуру папок `~/.ncrew/templates/` и `~/.ncrew/stage_prompts/`
2. Создать все файлы шаблонов и промптов
3. Промпты должны содержать ссылки на шаблоны
4. Промпты должны использовать переменные {task_file}

## Dependencies

- Зависит от: Задача 1 (System Settings)
- Блокирует: Задача 3 (Воркфлоу), Задача 5 (Интеграция промптов)

## Acceptance Criteria

- ✅ Все файлы шаблонов созданы в `~/.ncrew/templates/`
- ✅ Все файлы промптов созданы в `~/.ncrew/stage_prompts/`
- ✅ Промпты содержат ссылки на соответствующие шаблоны
- ✅ Промпты используют переменную {task_file}
